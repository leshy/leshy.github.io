<!doctype html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  lang=""
  xml:lang=""
  >
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
           <title>-</title>
        <link rel="stylesheet" href="/reset.css" />
        <link rel="stylesheet" href="/index.css" />
      
  </head>
  <body>
    
    <table class="header">
      <tr>
        <td colspan="2" rowspan="2" class="width-auto">
          <h1 class="title"></h1>
          <span class="subtitle"></span>
        </td>
        <th>Version</th>
        <td class="width-min">v0.1 alpha</td>
      </tr>
      <tr>
        <th>Created</th>
        <td class="width-min">
          <time style="white-space: pre"></time>
        </td>
      </tr>
      <tr>
        <th class="width-min">Author</th>
        <td class="width-auto">
          <a href=""><cite></cite></a>
        </td>
        <th class="width-min">Updated</th>
        <td></td>
      </tr>
    </table>
    <label class="debug-toggle-label"
      ><input type="checkbox" class="debug-toggle" /> Debug mode</label
    >
         <nav id="TOC" role="doc-toc">
            <h2 id="toctitle">Contents</h2>

       <ul>
<li><a href="#cell-structure" id="toc-cell-structure">Cell Structure</a>
<ul>
<li><a href="#bus-bars" id="toc-bus-bars">2 Bus bars</a></li>
<li><a href="#bus-bars-1" id="toc-bus-bars-1">3 Bus bars</a></li>
<li><a href="#inter-cell-connections"
id="toc-inter-cell-connections">Inter Cell Connections</a></li>
<li><a href="#losstemp-table-for-bus-bars"
id="toc-losstemp-table-for-bus-bars">Loss/temp table for bus
bars</a></li>
</ul></li>
<li><a href="#initial-model" id="toc-initial-model">Initial Model</a>
<ul>
<li><a href="#s8p" id="toc-s8p">2S8P</a></li>
<li><a href="#unified-bus-bar" id="toc-unified-bus-bar">Unified bus
bar?</a></li>
</ul></li>
</ul>
    </nav>
     <section id="cell-structure" class="level1">
<h1>Cell Structure</h1>
<p>How are we positioning cells? we have 20S8P</p>
<section id="bus-bars" class="level2">
<h2>2 Bus bars</h2>
<figure><pre>       ┇            ┇
 ┌────┐┇┌────┐┌────┐┇┌────┐
 │S0P1│┇│S0P2││S0P3│┇│S0P4│
 └┬───┘┇└┬───┘└┬───┘┇└┬───┘
 ┌▽───┐┇┌▽───┐┌▽───┐┇┌▽───┐
 │S0P5│┇│S0P6││S0P7│┇│S0P8│
 └────┘┇└────┘└────┘┇└────┘
.......┇............┇.......
 ┌────┐┇┌────┐┌────┐┇┌────┐
 │S1P1│┇│S1P2││S1P3│┇│S1P4│
 └┬───┘┇└┬───┘└┬───┘┇└┬───┘
 ┌▽───┐┇┌▽───┐┌▽───┐┇┌▽───┐
 │S1P5│┇│S1P6││S1P7│┇│S1P8│
 └────┘┇└────┘└────┘┇└────┘
       ┇            ┇

      75A          75A
</pre></figure>
<p>Two bus bars between parallel elements, which means each bar needs to
carry 75A. with 2-3/mm2 capacity it needs 25-40 mm2 cross section which
means 20x2mm bar?</p>
</section>
<section id="bus-bars-1" class="level2">
<h2>3 Bus bars</h2>
<figure><pre>       ┇      ┇      ┇
 ┌────┐┇┌────┐┇┌────┐┇┌────┐
 │S0P1│┇│S0P2│┇│S0P3│┇│S0P4│
 └┬───┘┇└┬───┘┇└┬───┘┇└┬───┘
 ┌▽───┐┇┌▽───┐┇┌▽───┐┇┌▽───┐
 │S0P5│┇│S0P6│┇│S0P7│┇│S0P8│
 └────┘┇└────┘┇└────┘┇└────┘
.......┇......┇......┇.......
 ┌────┐┇┌────┐┇┌────┐┇┌────┐
 │S1P1│┇│S1P2│┇│S1P3│┇│S1P4│
 └┬───┘┇└┬───┘┇└┬───┘┇└┬───┘
 ┌▽───┐┇┌▽───┐┇┌▽───┐┇┌▽───┐
 │S1P5│┇│S1P6│┇│S1P7│┇│S1P8│
 └────┘┇└────┘┇└────┘┇└────┘
       ┇      ┇      ┇

      56A    38A    56A
</pre></figure>
<p>Three bus bars need 50A each. again 20x2mm seems like minimum for
structural stability. Can use this to sandwich the cells together.</p>
<p>A bit scarry since individual screws connect negative and positive
terminals (investigate plastic screws?)</p>
</section>
<section id="inter-cell-connections" class="level2">
<h2>Inter Cell Connections</h2>
<p>we need to re-do the calculations for the nickel</p>
<figure><pre>┌─────┐ ┌─────┐ 
│CELL1│ │CELL5│ 
└┬────┘ └┬────┘
 │18.75A │18.75A
┌▽───────▽───────────┐
│       BUS1         |  56A ─▷
└△───────△───────────┘
 │9.37A  │9.37A
┌┴────┐ ┌┴────┐ 
│CELL6│ │CELL2│ 
└┬────┘ └┬────┘
 │9.37A  │9.37A
┌▽───────▽───────────┐
│       BUS2         |  38A ─▷
└△───────△───────────┘
 │9.37A  │9.37A
┌┴────┐ ┌┴────┐ 
│CELL7│ │CELL3│ 
└┬────┘ └┬────┘
 │ 9.37A │9.37A
┌▽───────▽───────────┐
│       BUS3         |  56A ─▷
└△───────△───────────┘ 
 │18.75A │18.75A
┌┴────┐ ┌┴────┐ 
│CELL4│ │CELL8│ 
└─────┘ └─────┘ 

</pre></figure>
</section>
<section id="losstemp-table-for-bus-bars" class="level2">
<h2>Loss/temp table for bus bars</h2>
<details><summary> python code block</summary><code><div class="sourceCode" id="cb1" data-results="table"
data-exports="both" data-session="battcalc"
data-post="header(*this*)"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>values <span class="op">=</span> {</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">**</span>material_copper,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    current: <span class="dv">56</span>, <span class="co"># 150 / 8</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    voltage: <span class="dv">84</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    temperature: <span class="dv">60</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    length: <span class="fl">0.12</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a> }</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> round_row(<span class="op">*</span>row):</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [ <span class="ss">f&quot;</span><span class="sc">{</span>item<span class="sc">:.2f}</span><span class="ss">&quot;</span> <span class="cf">for</span> item <span class="kw">in</span> row]</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> [<span class="st">&quot;mm²&quot;</span>, <span class="st">&quot;A/mm²&quot;</span>, <span class="st">&quot;Diam (mm)&quot;</span>, <span class="st">&quot;Loss (W)&quot;</span>, <span class="st">&quot;Loss (%)&quot;</span>, <span class="st">&quot;ΔT (°C)&quot;</span>]</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>rows <span class="op">=</span> []</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> area <span class="kw">in</span> np.linspace(<span class="dv">10</span>, <span class="dv">60</span>, <span class="dv">6</span>):</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    vals <span class="op">=</span> compute(</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        { <span class="op">**</span>values, area_mm2: area },</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        [ current_density, diameter_mm, power_loss, power_loss_percent, delta_t ])</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    rows.append(round_row(area, <span class="op">*</span>vals))</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Return formatted table</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>[headers, <span class="op">*</span>rows]</span></code></pre></div></code></details>
<table>
<tbody>
<tr class="odd">
<td>mm²</td>
<td>A/mm²</td>
<td>Diam (mm)</td>
<td>Loss (W)</td>
<td>Loss (%)</td>
<td>ΔT (°C)</td>
</tr>
<tr class="even">
<td>10.00</td>
<td>5.60</td>
<td>3.57</td>
<td>0.73</td>
<td>0.02</td>
<td>108.77</td>
</tr>
<tr class="odd">
<td>20.00</td>
<td>2.80</td>
<td>5.05</td>
<td>0.37</td>
<td>0.01</td>
<td>38.46</td>
</tr>
<tr class="even">
<td>30.00</td>
<td>1.87</td>
<td>6.18</td>
<td>0.24</td>
<td>0.01</td>
<td>20.93</td>
</tr>
<tr class="odd">
<td>40.00</td>
<td>1.40</td>
<td>7.14</td>
<td>0.18</td>
<td>0.00</td>
<td>13.60</td>
</tr>
<tr class="even">
<td>50.00</td>
<td>1.12</td>
<td>7.98</td>
<td>0.15</td>
<td>0.00</td>
<td>9.73</td>
</tr>
<tr class="odd">
<td>60.00</td>
<td>0.93</td>
<td>8.74</td>
<td>0.12</td>
<td>0.00</td>
<td>7.40</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="initial-model" class="level1">
<h1>Initial Model</h1>
<section id="s8p" class="level2">
<h2>2S8P</h2>
<p>Modelling two parallel blocks with 20x3 mm bus bars</p>
<p><u>turns out openscad is not sustainable, wrote a cli for <a
href="https://github.com/leshy/scad-clj-cli">clojure -&gt; openscad
compiler</a> so starting from scratch</u></p>
<details><summary> openscad code block</summary><code><pre class="openscad" data-file="single_series.png"
data-results="file link" data-exports="both" data-axes="t"><code>cell_height = 70.7;
cell_r = 10.625;
cell_d = cell_r * 2;
cell_distance = 5;

parallel_yn = 2;
parallel_xn = 4;

bus_bar_x = 20;
bus_bar_z = 3;

module_distance = 15;

series_yn = 5;
series_xn = 4;

parallel_module_x = (cell_d + cell_distance) * (parallel_xn);
parallel_module_y = (cell_d + cell_distance) * (parallel_yn);

echo(&quot;parallel_module_x&quot;, parallel_module_x);
echo(&quot;parallel_module_y&quot;, parallel_module_y);

module cell() {
   cylinder (h=cell_height, r=cell_r, center=true);
   translate ([0,0,(cell_height/2) +1 ]) {
     cylinder (h=2, r=5, center=true);
   }
}

module center(x,y,z) {
  translate([-x/2, -y/2, -z/2]) { children(); }
}

module colorize(n, total) {
   color(hue_to_rgb(n/total)) children();
}

// Where hue_to_rgb is the function from before:
function hue_to_rgb(h) = 
   (h * 6 &lt; 1) ? [1, h*6, 0] : 
   (h * 6 &lt; 2) ? [2-h*6, 1, 0] : 
   (h * 6 &lt; 3) ? [0, 1, h*6-2] : 
   (h * 6 &lt; 4) ? [0, 4-h*6, 1] : 
   (h * 6 &lt; 5) ? [h*6-4, 0, 1] : 
                 [1, 0, 6-h*6];

module spread(xn, yn, xdist, ydist, colorize_arg) {
  total = xn * yn;
  n = 0;

  union() {
      for ( ypos = [0:1:yn-1]) {
        for ( xpos = [0:1:xn-1]) {
          translate ([xpos * xdist, ypos * ydist, 0]) {
            if (colorize_arg == undef) { children(); } else
            {
              n = (xpos + 1) + (ypos * xn);
              echo(n, total, xpos, ypos);
              colorize(n, total) children();
            }
          }
        }
     }
  }
}


module parallel_module() {
  spread(parallel_xn, parallel_yn, cell_distance + cell_d, cell_distance + cell_d) {
    cell();
  }
}

module series_module() {
  spread(series_xn, series_yn,
    (parallel_module_x) + module_distance,
    (parallel_module_y) + module_distance)
  {
    parallel_module();
  }
}


module bus_bar() {
bus_bar_y = (parallel_module_y * 2) + module_distance;
translate([0,0,0])
  color([184/170, 115/170, 51/170], 0.5)
  cube([bus_bar_x, bus_bar_y, bus_bar_z], true);
}

module series_pair() {
   color([115/170, 184/170, 115/170], 0.5)
   parallel_module();
   translate([0, (parallel_module_x + module_distance) / 2, 0]) mirror([0,0,1]) color([115/170, 184/170, 115/170], 0.5) parallel_module();
   translate([(cell_d + cell_distance) / 2, (parallel_module_y - module_distance /2), (cell_height / 2) + + 2])
   spread(3, 1, cell_distance + cell_d, 0) {
     bus_bar();
   }
}

translate([(-parallel_module_x / 2) + cell_d - cell_distance, -parallel_module_y + (module_distance /2), 0]) series_pair();

//color([115/170, 184/170, 115/170], 0.5)
//spread(series_xn, series_yn, parallel_module_x + module_distance, parallel_module_y + module_distance )
//parallel_module();
</code></pre></code></details>
<p><img src="single_series.jpg" /></p>
</section>
<section id="unified-bus-bar" class="level2">
<h2>Unified bus bar?</h2>
<p>Actually from this it seems that a totally flat copper plate is
better then bus bars, with potentially holes for cell level fusing.</p>
<p>Covering the tops without protruding around the cells would make the
plate 80mm wide, 80x2mm makes a bar that causes almost no heating at
150A</p>
<p>Some pros seem to have reached the same conclusions:</p>
<p><img src="./img/pro-battery.jpg" /></p>
<p><u>Note that here bus bar is not in contact with actual cells, likely
to eliminate vibration of the plate damaging battery insulation? depends
on general approach to construction, seems like a good idea</u></p>
</section>
</section> 
    <div class="debug-grid"></div>
    <script src="/index.js"></script>
  </body>
</html>
